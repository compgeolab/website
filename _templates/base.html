{%- import "macros.html" as macros -%}

<!DOCTYPE html>
<html lang="{{ config.language }}">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  {%- if page.custom_page_title is defined %}
    {%- set title = page.custom_page_title|striptags|e %}
  {%- else %}
    {%- set title = page.title|striptags|e + " | " + config.site_name|striptags|e %}
  {%- endif %}
  <title>{{ title }}</title>

  {%- if config.favicon is defined %}
  <link rel="shortcut icon" href="{{ config.favicon|relative_to(page.path)|e }}"/>
  {%- endif %}

  <!-- Atkinson Hyperlegible font -->
  <link rel="stylesheet" href="{{ "pkg/atkinson-hyperlegible/fonts.css"|relative_to(page.path) }}" />

  <!-- Ubuntu Mono font -->
  <link rel="stylesheet" href="{{ "pkg/ubuntu-mono/fonts.css"|relative_to(page.path) }}" />

  <!-- FontAwsome icons -->
  <link rel="stylesheet" href="{{ "pkg/fontawesome/css/all.css"|relative_to(page.path) }}">

  <!-- Academicons icons -->
  <link rel="stylesheet" href="{{ "pkg/academicons-1.9.1/css/academicons.min.css"|relative_to(page.path) }}">

  <!-- Animate.css -->
  <link rel="stylesheet" href="{{ "pkg/animate.css"|relative_to(page.path) }}">

  <!-- Andy Bell's CSS reset -->
  <link rel="stylesheet" href="{{ "css/reset.css"|relative_to(page.path) }}" />

  <!-- Main CSS stylesheet -->
  <link rel="stylesheet" href="{{ "css/style.css"|relative_to(page.path) }}">

  <!-- Plausible analytics for anonymous usage statistics -->
  <script defer data-domain="compgeolab.org" src="https://plausible.io/js/plausible.js"></script>

  {%- block extrahead %}{% endblock %}

</head>

<body>
  <header>
    <div class="spread content-wide">
      <a href="{{ macros.pretty_relative_link(site['index'], page) }}">
        <img src="{{ config.brand|relative_to(page.path) }}" alt="{{ config.site_name }}">
      </a>
      <nav aria-label="Main">
        <ul class="list-inline" role="list">
          {%- for item in config.navigation %}
            <li>
              {{ macros.nav_link(item, page, site) }}
            </li>
          {%- endfor %}
          <li>
            {{ macros.social_icon("GitHub", "fab fa-github", "https://github.com/" + config.github) }}
          </li>
        </ul>
      </nav>
    </div>
  </header>

  <main class="flow">
    {%- if page.banner_image is defined %}
      <div class="banner" style="background-image: url({{ page.banner_image|relative_to(page.path) }}); background-position: center;" >
        <div class="flow content">
          <h1>{{ page.banner_title }}</h1>
          <p>{{ page.banner_subtitle }}</p>
          <ul class="list-inline" role="list">
            {%- for item in page.banner_links %}
              <li>
                {{ macros.nav_link(item, page, site) }}
              </li>
            {%- endfor %}
          </ul>
        </div>
      </div>
    {%- endif %}
    <div class="content flow extra-space">
      {%- block content %}
        {{ page.body }}
      {%- endblock %}
    </div>
  </main>

  <footer>
    <div class="content-wide flow">
      <nav aria-label="Main">
        <ul class="list-inline" role="list">
        {%- for item in config.navigation %}
          <li>
            {{ macros.nav_link(item, page, site) }}
          </li>
        {%- endfor %}
        <li>
          {{ macros.social_icon("GitHub", "fab fa-github", "https://github.com/" + config.github) }}
        </li>
        </ul>
      </nav>
      <div class="font-small flow-large">
        <p>
          {{ config.location.department }}
          •
          {{ config.location.school }}
          •
          {{ config.location.university }}
          •
          {{ config.location.country }}
        </p>
        <p>
          Last updated {{ build.today.strftime('%Y/%m/%d') }} from commit
          <a href="https://github.com/{{ config.repository }}/commit/{{ build.commit }}"><code>{{ build.commit }}</code></a>.
        </p>
        <p>
          Copyright &copy; {{ build.today.year }} {{ config.author }}
        </p>
      </div>
    </div>
  </footer>

</body>
</html>
