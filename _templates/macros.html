{# Macros to make the life easier across the website #}


{%- macro figure(src, caption, alt, style="") %}
  <figure>
    <img src="{{ src }}" alt="{{ alt }}" style="{{ style }}">
    <figcaption>{{ caption }}</figcaption>
  </figure>
{%- endmacro %}


{%- macro video(src, caption, alt, style="", type="video/mp4") %}
  <figure>
    <video style="{{ style }}" muted autoplay controls loop alt="{{ alt }}">
      <source src="{{ src }}" type="{{ type }}"/>
    </video>
    <figcaption>{{ caption }}</figcaption>
  </figure>
{%- endmacro %}


{%- macro social_icon(title, icon, url) -%}
  <!-- The rel="me" attribute verifies for these profiles that I own this domain -->
  <a rel="me" href="{{ url }}" target="_blank">
    <i class="{{ icon }} fa-lg" title="{{ title }}" aria-label="{{ title }}"></i>
  </a>
{%- endmacro -%}


{%- macro pretty_relative_link(page, reference) -%}
  {%- if page.id == reference.id -%}
    {%- set href = "." -%}
  {%- else -%}
    {%- set href = page.path|relative_to(reference.path)|replace('index.html', '') -%}
  {%- endif -%}
  {{ href }}
{%- endmacro -%}


{%- macro nav_link(item, page, site) -%}
  {%- set aria = "" -%}
  {%- set class = "" -%}
  {%- set href = pretty_relative_link(site[item.id], page) -%}
  {%- if page.id == item.id or page.parent == item.id|replace('/index', '') -%}
    {%- set class = "active" -%}
    {%- set aria = 'aria-current="page"' -%}
    {%- set href = "." -%}
  {%- endif -%}
  <a class="{{ class }}" {{ aria }} href="{{ href }}">{{ item.name }}</a>
{%- endmacro -%}


{%- macro page_link(id, page, site) -%}
  <a href="{{ site[id].path|relative_to(page.path) }}">{{ site[id].title }}</a>
{%- endmacro -%}
