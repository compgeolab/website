{% extends "base.html" %}

{%- block content %}

  <div class="column-container flow">

    <div class="column-body flow">
      <h1>{{ page.title }}</h1>
      {{ page.body }}
      {%- if page.id == "manual/index" %}
        <h2>Contents</h2>
        <p>Browse the manual sections below:</p>
        <nav aria-label="Manual">
          <ol>
            {%- for id in site["manual/index"]["toc_table"] %}
              <li>
                <a href="{{ site[id].path|relative_to(page.path) }}">
                  {{ site[id].title }}
                </a>
              </li>
            {%- endfor %}
          </ol>
        </nav>
      {%- endif %}
    </div>

    {%- if page.id != "manual/index" %}
      <div class="column-nav flow">
        <p><i class="fas fa-list fa-sm" aria-hidden="true"></i> Navigation</p>
        <nav class="flow" aria-label="Manual">
          <ol class="flow" role="list">
            <li class="text-bold">
              <a href="{{ site['manual/index'].path|relative_to(page.path) }}">
                <i class="far fa-arrow-alt-circle-left fa-sm" aria-hidden="true"></i>
                Back to overview
              </a>
            <li>
            {%- for id in site["manual/index"]["toc_table"] %}
              {%- if id == page.id %}
                <li class="active">
                  <a aria-current="page" href="{{ site[id].path|relative_to(page.path) }}">
                    {{ site[id].title }}
                  </a>
                </li>
              {%- else %}
                <li>
                  <a href="{{ site[id].path|relative_to(page.path) }}">
                    {{ site[id].title }}
                  </a>
                </li>
              {%- endif %}
            {%- endfor %}
          </ol>
        </nav>
        <hr>
        <p>
          <a target="_blank" href="https://github.com/{{ config.repository }}/edit/main/{{ page.source }}">
            <i class="fa fa-code-branch" aria-hidden="true"></i>
            Edit on GitHub
          </a>
        </p>
      </div>
    {%- endif %}

  </div>
{%- endblock %}

